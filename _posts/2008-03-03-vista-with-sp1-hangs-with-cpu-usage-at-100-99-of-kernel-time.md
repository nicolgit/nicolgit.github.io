---
title: Vista with SP1 hangs with CPU usage at 100% (99% of kernel time)
tags: [driver, Gemplus, issue, Vista]
---
<P><STRONG>UPDATE</STRONG>:&nbsp;<EM>I think that information below are not correct because in days after this post, I continued to have this problem in other scenarios too. At the end of the story I just re-installed the machine with a "Vista&amp;SP1 integrated"&nbsp;and now, after one month,&nbsp;everything is working fine. At this time the only hypothesis I have is that for some reason the SP1 setup didn't the right job, how knows:-S<BR></EM>N</P>
<P>&nbsp;---------</P>
<P>Since I installed SP1 RTM on my Vista (Toshiba Tecra M7 dual core tablet PC) I discovered that the system after a boot, remained with CPU usage constant at 100%. A deeper analysis shown that 99% of that CPU usage was kernel time:-(</P>
<P><A href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_msdn/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/kernel-time.jpg" original-url="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/kernel-time.jpg" mce_href="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/kernel-time.jpg"><IMG style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" height=159 alt=kernel-time src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_msdn/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/kernel-time_thumb.jpg" original-url="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/kernel-time_thumb.jpg" width=469 border=0 mce_src="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/kernel-time_thumb.jpg"></A> </P>
<P>After a Sunday afternoon spent to find a solution, I discovered the problem: I have an old PCMCIA card reader from GEMPLUS (GemPC400) that, if present when I boot the laptop, produces the issue and the behavior described above.</P>
<P><A href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_msdn/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/IMG_0543.jpg" original-url="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/IMG_0543.jpg" mce_href="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/IMG_0543.jpg"><IMG style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" height=349 alt=IMG_0543 src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_msdn/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/IMG_0543_thumb.jpg" original-url="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/IMG_0543_thumb.jpg" width=469 border=0 mce_src="http://blogs.msdn.com/blogfiles/nicold/WindowsLiveWriter/VistawithSP1hangswithCPUusageat10099ofke_12E29/IMG_0543_thumb.jpg"></A> </P>
<P>When Vista started with CPU ad 100%, even if I removed the card reader, system remained with CPU at 100% (== unusable). The only way to unlock the situation, was to reboot the system (without the card!).</P>
<P>Because I needed that card reader, I found a workaround: infact, if I start Vista without the card reader and after the boot I insert it into PCMCIA port everything goes fine.</P>
<P><STRONG>Lession lerned</STRONG>: if you discover that your Vista uses 99% of CPU time as "kernel time", try to analyze peripherals you have installed because there could be a driver that is not working as it should.</P>
